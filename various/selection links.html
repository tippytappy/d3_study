<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="../d3-7.6.1.js"></script>
  <style>
    #element_letter {
      font-size: 20px;
    }
  </style>
  <title>Document</title>
</head>
<body>
  <div id="element_letter" font-size="30">The selected element's id is</div>
  <br>
  <svg width="500" height="500"></svg>
  <script>

    data = ['a', 'b', 'c', 'd']

  // define a global variable to hold the 'this' value
  letter = ''
  div_selection = d3.select('#element_letter')
  circle_selection = d3.select('#circle_group')
        .selectAll(`${'#' + letter}`)

  // rects
  d3.select('svg')
    .append('g')
    .attr('transform', 'translate(50, 5)')
      .selectAll('rect')
      .data(data)
      .join('rect')
      .attr('id', (d, i) => data[i])
      .attr('x', 50)
      .attr('y', (d, i) => i * 100)
      .attr('width', 50)
      .attr('height', 50)
      .on('mouseenter', function(e) {
        // rect
        d3.select(this)
        .attr('fill', 'green');

        letter = this.id
        
        // circles
        d3.select('#circle_group')
        .selectAll(`${'#' + letter}`)
        .attr('fill', 'green')
        
        // div text
        div_selection
          .text("The selected element's id is " + letter)
      })
      .on('mouseleave', function(e) {
        // rects
        d3.select(this)
        .attr('fill', 'black')

        // circles
        d3.select('#circle_group')
        .selectAll(`${'#' + letter}`)
        .attr('fill', 'black')
      })

    // circles
    d3.select('svg')
    .append('g')
    .attr('id', 'circle_group')
    .attr('transform', 'translate(300, 30)')
      .selectAll('circle')
      .data(data)
      .join('circle')
      .attr('id', (d, i) => data[i])
      .attr('cx', 50)
      .attr('cy', (d, i) => i * 100)
      .attr('r', 25)

  </script>
</body>
</html>