<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="../d3-7.6.1.js"></script>
  <title>Document</title>
</head>
<body>
  <svg width="500" height="500"></svg>
  <script>

    data = ['a', 'b', 'c', 'd']

  // define a global variable to hold the 'this' value
  sx = 'b'

  // rects
  d3.select('svg')
    .append('g')
    .attr('transform', 'translate(50, 5)')
      .selectAll('rect')
      .data(data)
      .join('rect')
      .attr('id', (d, i) => data[i])
      .attr('x', 50)
      .attr('y', (d, i) => i * 100)
      .attr('width', 50)
      .attr('height', 50)
      .on('mouseenter', function(e) {
        d3.select(this)
        .attr('fill', 'green');

        sx = this.id
        console.log('this value: ' + sx)
        
        d3.select('#circle_group')
        .selectAll(`${'#' + this.id}`)
        .attr('fill', 'green')
        
      })
      .on('mouseleave', function(e) {
        d3.select(this)
        .attr('fill', 'black')

        d3.select('#circle_group')
        .selectAll(`${'#' + this.id}`)
        .attr('fill', 'black')
      })

    // circles
    d3.select('svg')
    .append('g')
    .attr('id', 'circle_group')
    .attr('transform', 'translate(300, 30)')
      .selectAll('circle')
      .data(data)
      .join('circle')
      .attr('id', (d, i) => data[i])
      .attr('cx', 50)
      .attr('cy', (d, i) => i * 100)
      .attr('r', 25)

    // div to show the variable value
    d3.select('body')
      .append('div')
      .text(sx)
  </script>
</body>
</html>